var capswalk;(self.webpackChunkcapswalk=self.webpackChunkcapswalk||[]).push([[826],{929:(e,t,s)=>{"use strict";s.d(t,{R:()=>n});const a=Object.freeze({enumerable:!1}),r=Object.freeze({writable:!1});function i(e){e.repeat&&e.preventDefault()}var n;(e=>{function t(e){for(const s of Object.getOwnPropertyNames(e)){const a=e[s];null!==a&&"object"==typeof a&&t(a)}Object.freeze(e)}function s(e,t,...s){for(const a of s)Object.defineProperty(t,a,e)}let n;var o;e.deepFreeze=function(e){return t(e),e},e.hasProp=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.protoNoEnum=function(e,...t){Object.getOwnPropertyNames(e.prototype).freeze(),t.forEach((t=>{Object.defineProperty(e.prototype,t,a)}))},e.instNoEnum=s.bind(null,a),e.propNoWrite=s.bind(null,r),e.camelCaseTransforms=function(e){const t=e.replace(/[A-Z]/g,(e=>" "+e.toLowerCase()));return Object.freeze({spaceyLowercase:t,spaceyUppercase:t.toUpperCase(),spaceyCapitalized:t.split(" ").map((e=>e.charAt(0).toUpperCase()+e.substring(1))).join(" ")})},(o=n=e.Web||(e.Web={})).prependComment=function(e,t){e.parentNode.insertBefore(document.createComment(" "+t+" "),e)},o.adoptStyleSheet=function(t,s){t.appendChild(e.html("link",[],{rel:"stylesheet",href:s}))},o._makeSmartStorage=function(e,t,s){const a={};return Object.keys(s).forEach((e=>{const r=""+e,i=s[e];Object.defineProperty(a,e,{enumerable:!0,get:()=>{const e=t.getItem(r);return null===e?i:JSON.parse(e)},set:e=>{t.setItem(r,JSON.stringify(e))}})})),a},e.html=function(e,t,s){const a=document.createElement(e);try{Object.seal(a)}catch(e){}return(null==t?void 0:t.length)&&a.classList.add(...t),"button"===e?(a.type="button",a.addEventListener("keydown",i,{capture:!0})):"a"===e&&(a.draggable=!1,a.rel="noopener"),void 0!==s&&Object.assign(a,s),a},e.svg=function(e,t,s){const a=document.createElementNS("http://www.w3.org/2000/svg",e);return Object.seal(a),(null==t?void 0:t.length)&&a.classList.add(...t),void 0!==s&&Object.assign(a,s),a}})(n||(n={})),Object.freeze(n)},634:(e,t,s)=>{"use strict";s.d(t,{ZA:()=>a,oU:()=>r,m4:()=>i,JD:()=>n});class a{}var r,i;(e=>{let t;var s;let a;var r;(s=t=e.Name||(e.Name={})).REGEXP=/^(?:[a-zA-Z0-9:-]+)$/,s.MaxLength=30,(r=a=e.Passphrase||(e.Passphrase={})).REGEXP=/^(?:[a-zA-Z0-9:-]*)$/,r.MaxLength=30,e.GameServerReconnectionAttempts=2,e.DEFAULT_TTL=20})(a||(a={})),Object.freeze(a),Object.freeze(a.prototype),(e=>{let t,s,a;(t=e.Create||(e.Create={})).NAME="joiner/create",(e=>{let t;var s;e.NAME="joiner/exist",(s=t=e.Status||(e.Status={})).IN_LOBBY="in-lobby",s.IN_GAME="in-game",s.DELETE="delete"})(s=e.Exist||(e.Exist={})),(a=e.TryJoin||(e.TryJoin={})).NAME="joiner/try-join"})(r||(r={})),Object.freeze(r),(e=>{let t;(t=e.UserInfo||(e.UserInfo={})).NAME="group/user-info-change",e.CREATE_GAME="group/create-game"})(i||(i={})),Object.freeze(i);var n=(e=>(e.RESET="game/reset",e.UNPAUSE="game/unpause",e.PAUSE="game/pause",e.IN_GAME="game/ingame",e.RETURN_TO_LOBBY="game/return-to-lobby",e))(n||{})},173:(e,t,s)=>{"use strict";s.d(t,{Uo:()=>i,J5:()=>r});const a=JSON.parse('["ðŸŽˆ","ðŸŽ","ðŸ®","ðŸ—¿","âš±","ðŸ›’","ðŸŽ‰","ðŸ§µ","ðŸ§¶","ðŸŽƒ","ðŸŽ„","ðŸŽŽ","ðŸŽ","ðŸ§§","ðŸŽ€","ðŸŽ","ðŸŽ ","ðŸŽª","ðŸŽ­","ðŸŽ«","ðŸ‘‘","ðŸ‘’","ðŸŽ©","ðŸŽ“","ðŸ‘“","ðŸ•¶","ðŸ¤¿","ðŸ’„","ðŸ’Ž","ðŸ‘”","ðŸ‘–","ðŸ§¤","ðŸ§¦","ðŸ‘—","ðŸ‘˜","ðŸ‘š","ðŸ‘œ","ðŸŽ’","ðŸ§°","ðŸ’¼","ðŸ¥¾","ðŸ‘ ","ðŸ‘¢","ðŸ©°","âš½","âš¾","ðŸ€","ðŸ","ðŸˆ","ðŸŽ±","ðŸŽ³","ðŸ¥Œ","ðŸ“","ðŸŽ¯","ðŸª€","ðŸ†","ðŸŽ®","ðŸŽ²","ðŸ“¢","ðŸ””","ðŸŽµ","ðŸŽ§","ðŸ“»","ðŸ“¯","ðŸ¥","ðŸŽ·","ðŸŽº","ðŸŽ¸","ðŸª•","ðŸŽ»","ðŸŽ¥","ðŸ“·","ðŸŽ¬","ðŸ“º","ðŸ“¼","â˜Ž","ðŸ“±","ðŸ“Ÿ","ðŸ’»","ðŸ’¾","ðŸ”¬","ðŸ”­","âš™","ðŸ§²","ðŸ”","ðŸ’¡","ðŸ©º","ðŸ©¹","âœ’","âœ","ðŸ“œ","ðŸ“‹","ðŸ”–","ðŸ’¸","ðŸ’³","ðŸ“¨","ðŸ“¦","ðŸ“¬","ðŸ“®","â³","â°","ðŸ“…","ðŸ“†","ðŸ“ˆ","ðŸ“‰","ðŸ“Œ","ðŸ“","âœ‚","ðŸ—‘","â™Ÿ","â™ ","â™£","â™¥","ðŸ”“","ðŸ”‘","âš”","ðŸ”«","ðŸ’€","ðŸ™ˆ","ðŸ™‰","ðŸ™Š","ðŸ¶","ðŸº","ðŸ±","ðŸ¦","ðŸ¯","ðŸ¦’","ðŸ¦Š","ðŸ¦","ðŸ®","ðŸ·","ðŸ—","ðŸ­","ðŸ¹","ðŸ°","ðŸ»","ðŸ¨","ðŸ¼","ðŸ¸","ðŸ¦“","ðŸ´","ðŸ¦„","ðŸ”","ðŸ²","ðŸ„","ðŸª","ðŸ«","ðŸ¦¥","ðŸ¦¨","ðŸ˜","ðŸ","ðŸ€","ðŸ¦”","ðŸ‡","ðŸ¿","ðŸ¦Ž","ðŸŠ","ðŸ¢","ðŸ","ðŸ¦•","ðŸ¦ˆ","ðŸ¬","ðŸ³","ðŸ‹","ðŸŸ","ðŸ ","ðŸ¦","ðŸ¦‘","ðŸ™","ðŸ¦ž","ðŸ¦€","ðŸš","ðŸ¦†","ðŸ“","ðŸ¦ƒ","ðŸ¦…","ðŸ•Š","ðŸ¦¢","ðŸ¦œ","ðŸ¦©","ðŸ¦š","ðŸ¦‰","ðŸ¦","ðŸ§","ðŸ£","ðŸ¦‹","ðŸŒ","ðŸ›","ðŸœ","ðŸ","ðŸž","ðŸ•·","ðŸ•¸","ðŸ‘","ðŸ¦·","ðŸ‘„","ðŸ§ ","ðŸ’ƒ","ðŸ•º","ðŸ¤¸â€â™€ï¸","ðŸ‘ƒ","ðŸ¤","âœŒ","ðŸ¤ž","ðŸ––","ðŸ¤˜","ðŸ‘","ðŸ‘","ðŸ™Œ","ðŸ™","ðŸž","ðŸ§‚","ðŸ¥","ðŸ¥¨","ðŸ§€","ðŸ¥—","ðŸ¥ª","ðŸŒ®","ðŸ¥¡","ðŸ™","ðŸš","ðŸœ","ðŸ£","ðŸ¤","ðŸ¥","ðŸ¦","ðŸ°","ðŸ¬","ðŸ¡","ðŸ®","ðŸ§ƒ","â˜•","ðŸ§Š","ðŸº","ðŸ‘","ðŸ“","ðŸŽ","ðŸŠ","ðŸ¥­","ðŸ","ðŸ‹","ðŸˆ","ðŸ","ðŸ","ðŸ’","ðŸ…","ðŸŒ","ðŸ‰","ðŸ¥","ðŸŒ½","ðŸ¥‘","ðŸ¥¬","ðŸ§„","ðŸ§…","ðŸ¥•","ðŸŒ¶","ðŸŒ°","ðŸ„","ðŸŒ¸","ðŸµ","ðŸŒº","ðŸŒ»","ðŸŒ¼","ðŸŒ·","ðŸŒ±","ðŸŒ²","ðŸŽ","ðŸŒµ","â˜˜","ðŸ€","ðŸ","ðŸ‚","ðŸš—","ðŸš’","ðŸ›¹","ðŸš‹","ðŸš ","ðŸš‚","ðŸš€","ðŸ›°","âš“","ðŸš©","ðŸ—º","ðŸ§­","â›°","ðŸŒ‹","ðŸ—»","ðŸ—½","ðŸ›Ž","ðŸª‘","ðŸš½","ðŸ§»","ðŸ›","ðŸ§¯","â˜","â›ˆ","ðŸŒ¤","ðŸŒ¦","ðŸŒ§","ðŸŒ©","â˜€","â­","ðŸŒˆ","â˜‚","â›±","âš¡","â„","â›„","ðŸ”¥","ðŸŒŠ"]');Object.freeze({behavior:"smooth",block:"center",inline:"center"});class r{}(e=>{let t,s;var r;let i;var n;e.Family=Object.freeze({Human:"Human",Chaser:"Chaser"}),e.Family,(t=e.Id||(e.Id={})).NULL=-1,(r=s=e.Username||(e.Username={})).REGEXP=/[ a-zA-Z0-9:-]+/,r.MAX_LENGTH=15,(n=i=e.Avatar||(e.Avatar={})).Values=a.map((e=>e+"ï¸")).freeze(),n.GET_RANDOM=function(){return n.Values[Math.random()*n.Values.length|0]}})(r||(r={})),Object.freeze(r);class i{}(e=>{let t,s;(t=e.Seq||(e.Seq={})).REGEXP=new RegExp("^[a-zA-Z0-9!@#$%^&*()-_=+;:'\"\\|,.<>/?]+$"),(s=e.WeightExaggeration||(e.WeightExaggeration={})).MAX=4,e.CHAR_HIT_COUNT_SEED_CEILING=5})(i||(i={})),Object.freeze(i),Object.freeze(i.prototype)},315:(e,t,s)=>{"use strict";var a;s.d(t,{l:()=>a}),(e=>{let t;var s;(s=t=e.Status||(e.Status={})).PLAYING="PLAYING",s.PAUSED="PAUSED",s.OVER="OVER",Object.freeze(t),e.K=Object.freeze({PORTION_OF_MOVES_THAT_ARE_BOOST:.4,MAX_PLAYER_CROWDEDNESS:.5,_REQUEST_BUFFER_LENGTH:5,_ROBOT_PRIORITY_MAX_REUSES:4})})(a||(a={})),Object.freeze(a)},986:(e,t,s)=>{"use strict";s.d(t,{J:()=>N});var a,r=s(929),i=s(315),n=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},o=(e,t,s,a)=>(n(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s);class l{constructor(){((e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,0)})(this,a),this.size=0}get lastRejectId(){return n(this,e=a,"read from private field"),e.get(this);var e}reset(e){o(this,a,0),this.size=0,this.predictedCoord=e}get isFull(){return this.size===i.l.K._REQUEST_BUFFER_LENGTH}signRequest(e){return this.size++,this.predictedCoord=e.moveDest,e}getNextRejectId(){return(this.lastRejectId+(99*Math.random()|0))%100}reject(e,t){o(this,a,e),this.size=0,this.predictedCoord=t}acceptOldest(){this.size--}}a=new WeakMap,Object.freeze(l),Object.freeze(l.prototype);var h,d,c=s(173),p=s(34),m=Object.defineProperty,u=Object.defineProperties,v=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,O=(e,t,s)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,g=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},y=(e,t,s)=>(g(e,t,"read from private field"),s?s.call(e):t.get(e)),S=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},w=(e,t,s,a)=>(g(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s);const _=class extends c.J5{constructor(e,t){super(),S(this,h,0),S(this,d,0),this.prevCoord=void 0,this.playerId=t.playerId,this.familyId=t.familyId,this.teamId=t.teamId,this.username=t.username,this.avatar=t.avatar,this.game=e,this.reqBuffer=new l,r.R.instNoEnum(this,"game"),r.R.propNoWrite(this,"game","playerId","familyId","teamId","username","avatar","reqBuffer"),new.target===_&&Object.seal(this)}get team(){return this.game.teams[this.teamId]}get coord(){return y(this,h)}get boosts(){return y(this,d)}get isDowned(){return this.boosts<0}isTeamedWith(e){return this.team.members.includes(e)}_onTeamsBootstrapped(){}reset(e){w(this,h,e),this.prevCoord=e,this.game.grid.moveEntity(this.playerId,e,e),w(this,d,0),this.reqBuffer.reset(e)}onGamePlaying(){}onGamePaused(){}onGameOver(){}makeMovementRequest(e,t){this.reqBuffer.isFull||this.game.requestStateChange(this.reqBuffer.signRequest({author:this.playerId,lastRejectId:this.reqBuffer.lastRejectId,moveType:t,moveDest:e}))}_setCoord(e){this.prevCoord=this.coord,w(this,h,e)}set boosts(e){const t=this.isDowned;if(w(this,d,e),t||!this.isDowned)return;const s=this.team,a=this.game.teams;if(s.elimOrder===p.S.ElimOrder.STANDING&&s.members.every((e=>e.isDowned))){const e=1+a.filter((e=>e.elimOrder!==p.S.ElimOrder.STANDING)).length;s.elimOrder=1+a.filter((e=>e.elimOrder!==p.S.ElimOrder.STANDING)).length,e===a.length&&this.game.statusBecomeOver()}}};let N=_;h=new WeakMap,d=new WeakMap,(e=>{let t;e.MoveType=Object.freeze({NORMAL:"NORMAL",BOOST:"BOOST"}),e.MoveType,(t=e.CtorArgs||(e.CtorArgs={})).finalize=function(t){const s=Array.from(new Set(t.players.map((e=>e.teamId)))).seal().sort(((e,t)=>e-t)).freeze().reduce(((e,t,s)=>(e[t]=s,e)),[]);t.players=t.players.slice().seal().sort(((e,t)=>s[e.teamId]-s[t.teamId])).freeze().map(((t,a)=>{var r,i,n;return i=((e,t)=>{for(var s in t||(t={}))b.call(t,s)&&O(e,s,t[s]);if(f)for(var s of f(t))E.call(t,s)&&O(e,s,t[s]);return e})({},t),n={playerId:a,teamId:s[t.teamId],avatar:null!=(r=t.avatar)?r:e.Avatar.GET_RANDOM()},u(i,v(n))})).freeze()},Object.freeze(t)})(N||(N={})),r.R.protoNoEnum(N,"onGamePlaying","onGamePaused","onGameOver","_onTeamsBootstrapped"),Object.freeze(N),Object.freeze(N.prototype)},34:(e,t,s)=>{"use strict";s.d(t,{S:()=>r});var a=s(929);class r{constructor(e,t){if(this.id=e,this.members=t,this.elimOrder=r.ElimOrder.STANDING,a.R.propNoWrite(this,"id","members"),Object.seal(this),0===t.length)throw new Error("Teams must have at least one member.")}reset(){this.elimOrder=r.ElimOrder.STANDING}}(e=>{let t;(t=e.ElimOrder||(e.ElimOrder={})).STANDING=0})(r||(r={})),Object.freeze(r),Object.freeze(r.prototype)},248:(e,t,s)=>{"use strict";s.d(t,{b:()=>i});var a=s(929);const r=Object.freeze({IDENT:e=>e,LOWER:e=>e.toLowerCase()}),i={"engl-low":{id:void 0,module:"English",export:"Lowercase",isolatedMinOpts:25,avgWeight:3.8639230769230766,remapFunc:r.LOWER,fontZoom:1,displayName:"English Lowercase (qwerty)",blurb:""},"engl-mix":{id:void 0,module:"English",export:"MixedCase",isolatedMinOpts:51,avgWeight:3.8639230769230775,remapFunc:r.IDENT,fontZoom:1,displayName:"English Mixed-Case (Qwerty)",blurb:""},"japn-hir":{id:void 0,module:"Japanese",export:"Hiragana",isolatedMinOpts:70,avgWeight:275509.7083333333,remapFunc:r.LOWER,fontZoom:1,displayName:"Japanese Hiragana",blurb:""},"japn-kat":{id:void 0,module:"Japanese",export:"Katakana",isolatedMinOpts:68,avgWeight:45577.26666666667,remapFunc:r.LOWER,fontZoom:1,displayName:"Japanese Katakana",blurb:""},"kore-dub":{id:void 0,module:"Korean",export:"Dubeolsik",isolatedMinOpts:9085,avgWeight:.9974982117852247,remapFunc:r.IDENT,fontZoom:1,displayName:"Korean Dubeolsik (ë‘ë²Œì‹ í‚¤ë³´ë“œ)",blurb:"The most common keyboard layout, and South Korea's only Hangul standard since 1969. Consonants are on the left, and vowels on the right."},"kore-sub":{id:void 0,module:"Korean",export:"Sebeolsik",isolatedMinOpts:10098,avgWeight:.9974982117852336,remapFunc:r.IDENT,fontZoom:1,displayName:"Korean Sebeolsik (ì„¸ë²Œì‹ ìµœì¢… í‚¤ë³´ë“œ)",blurb:"Another Hangul keyboard layout used in South Korea, and the final Sebeolsik layout designed by Dr. Kong Byung Woo, hence the name. Syllable-initial consonants are on the right, final consonants on the left, and vowels in the middle. It is more ergonomic than the dubeolsik, but not widely used."},"kore-rom":{id:void 0,module:"Korean",export:"Romanization",isolatedMinOpts:4764,avgWeight:.9974982117852286,remapFunc:r.LOWER,fontZoom:1,displayName:"Korean Revised Romanization",blurb:"The Revised Romanization of Korean (êµ­ì–´ì˜ ë¡œë§ˆìž í‘œê¸°ë²•; åœ‹èªžì˜ ë¡œë§ˆå­— è¡¨è¨˜æ³•) is the official South Korean language romanization system. It was developed by the National Academy of the Korean Language from 1995, and was released on 7 July 2000 by South Korea's Ministry of Culture and Tourism"},"engl-cell-enc":{id:void 0,module:"English",export:"OldCellphone.Encode",isolatedMinOpts:7,avgWeight:3.8639230769230766,remapFunc:r.IDENT,fontZoom:1,displayName:"Old Cellphone Keyboard",blurb:""},"mors-enc":{id:void 0,module:"English",export:"Morse.Encode",isolatedMinOpts:11,avgWeight:2.6089716238018403,remapFunc:e=>e,fontZoom:1,displayName:"Morse Encoder",blurb:""},"mors-dec":{id:void 0,module:"English",export:"Morse.Decode",isolatedMinOpts:40,avgWeight:2.6089716238018408,remapFunc:r.LOWER,fontZoom:.4,displayName:"Morse Decoder",blurb:""},ngram2:{id:void 0,module:"Ngrams",export:"Ngram2",isolatedMinOpts:199,avgWeight:5.000010000000002,remapFunc:r.LOWER,fontZoom:.9,displayName:"English Bigrams",blurb:""},ngram3:{id:void 0,module:"Ngrams",export:"Ngram3",isolatedMinOpts:399,avgWeight:2.5000100000000023,remapFunc:r.LOWER,fontZoom:.6,displayName:"English Trigrams",blurb:""},numpad:{id:void 0,module:"Numpad",export:"Numpad",isolatedMinOpts:99,avgWeight:1,remapFunc:r.LOWER,fontZoom:.95,displayName:"Number Pad",blurb:""}};Object.entries(i).freeze().forEach((([e,t])=>{t.id=e})),a.R.deepFreeze(i)},254:(e,t,s)=>{"use strict";s.d(t,{s:()=>a});var a,r=s(929),i=s(173);(e=>{let t;e.Local=r.R.Web._makeSmartStorage("capswalk",localStorage,{volumeBgMusic:1,volumeSfx:1,emojiFont:"twemoji",moreAnimations:!1,colourSchemeId:"default",colourSchemeStyleLiteral:"",gamePresetId:"",username:"unnamed player",avatar:""}),e.getLastUserInfo=function(){var t;return Object.freeze({username:e.Local.username,teamId:0,avatar:null!=(t=e.Local.avatar)?t:i.J5.Avatar.GET_RANDOM()})},e.Session=r.R.Web._makeSmartStorage("capswalk",localStorage,Object.freeze({})),(e=>{let t;e.DB_NAME="capswalk_db",(t=e.UserGamePresetStore||(e.UserGamePresetStore={})).STORE_NAME="userGamePresets",Object.freeze(t)})(t=e.IDB||(e.IDB={})),Object.freeze(t)})(a||(a={})),Object.freeze(a)},809:(e,t,s)=>{"use strict";s.r(t),s.d(t,{game:()=>Yt,screen:()=>Vt,top:()=>qt}),s(408),s(839);var a,r=s(929);(e=>{let t;var s;let a,r;e.ID={PUBLIC_GAME_SERVER_URLS:"public-game-hosts-list",CURRENT_HOST_GROUPS:"current-host-groups-list"},(s=t=e.General||(e.General={})).Class={FILL_PARENT:"fill-parent",CENTER_CONTENTS:"center-contents",STACK_CONTENTS:"stack-contents",INPUT_GROUP:"input-group",INPUT_GROUP_ITEM:"input-group-item"},s.Dataset={COLOUR_SCHEME:"colourScheme"},(a=e.Player||(e.Player={})).Dataset={DOWNED:{KEY:"downed",VALUES:{TEAM:"team",SELF:"self",NO:"no"}},FACE_SWATCH:"face"},(e=>{let t;e.Id={ALL_SCREENS:"all-screens-container",SCREEN_TINT:"screen-tint"},e.Class={BASE:"screen",NAV_NEXT:"screen--next-button",NAV_PREV:"screen--prev-button"},(e=>{let t;(t=e.Setup||(e.Setup={})).Id={LANG_WEIGHT_EXAGGERATION_LIST:"screen-setup--lang-weight-exaggeration-list"}})(t=e.Impl||(e.Impl={}))})(r=e.Screen||(e.Screen={}))})(a||(a={})),r.R.deepFreeze(a);var i,n,o=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},l=(e,t,s)=>(o(e,t,"read from private field"),s?s.call(e):t.get(e)),h=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},d=(e,t,s,a)=>(o(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s);const c=a.Screen.Class,p=class{constructor(e,t){h(this,i,void 0),this.baseElem=r.R.html("div",[c.BASE]),h(this,n,!1),this.screenId=t,this.screenNames=r.R.camelCaseTransforms(t),this.top=e.toplevel,d(this,i,e.parentElem),this.requestGoToScreen=e.goToScreen,this.nav=Object.freeze({prev:r.R.html("button"),next:r.R.html("button")}),r.R.propNoWrite(this,"screenId","top","baseElem","nav","requestGoToScreen"),this.nav.prev.classList.add(c.NAV_PREV),this.nav.next.classList.add(c.NAV_NEXT),this.nav.prev.textContent="Back",this.nav.next.textContent="Next",this.nav.prev.onclick=e=>{const s=p.NavTree,a=s[this.screenId];s[a.prev].href===a.href?this.requestGoToScreen(p.NavTree[t].prev,void 0):window.history.back()}}lazyLoad(){l(this,n)||(this._abstractLazyLoad(),this.baseElem.setAttribute("aria-label",this.screenNames.spaceyCapitalized+" Screen"),d(this,n,!0))}async _enter(e,t){var s;if(document.title=`${this.screenNames.spaceyCapitalized} | ${this.top.defaultDocTitle}`,e===p.NavDir.FORWARD){const e=new window.URL(window.location.href),t=e.hash=p.NavTree[this.screenId].href,a=[{screenId:this.screenId},"",e.href];(null==(s=window.history.state)?void 0:s.screenId)!==t&&(p.NavTree[this.screenId].prev===this.screenId?history.replaceState(...a):history.pushState(...a))}this.lazyLoad(),await this._abstractOnBeforeEnter(e,t)}_leave(e){return!!this._abstractOnBeforeLeave(e)}_onAfterEnter(){this.baseElem.setAttribute("aria-current","true"),l(this,i).appendChild(this.baseElem)}_onAfterLeave(){this.baseElem.setAttribute("aria-current","false"),this.baseElem.remove()}getRecommendedFocusElem(){}async _abstractOnBeforeEnter(e,t){}_abstractOnBeforeLeave(e){return!0}};let m=p;i=new WeakMap,n=new WeakMap,(e=>{let t;var s;let a;var i;(s=t=e.Id||(e.Id={})).HOME="home",s.LEARNING="learning",s.HOW_TO_HOST="how-to-host",s.SETTINGS="settings",s.SETUP_OFFLINE="setup-offline",s.PLAY_OFFLINE="play-offline",s.GROUP_JOINER="group-joiner",s.SETUP_ONLINE="setup-online",s.GROUP_LOBBY="group-lobby",s.PLAY_ONLINE="play-online",Object.freeze(t),e.NavTree=r.R.deepFreeze({home:{prev:"home",href:"home"},learning:{prev:"home",href:"learning"},"how-to-host":{prev:"home",href:"how-to-host"},settings:{prev:"home",href:"settings"},"setup-offline":{prev:"home",href:"setup-offline"},"play-offline":{prev:"setup-offline",href:"setup-offline"},"group-joiner":{prev:"home",href:"group-joiner"},"group-lobby":{prev:"group-joiner",href:"group-joiner"},"setup-online":{prev:"group-lobby",href:"group-joiner"},"play-online":{prev:"group-lobby",href:"group-joiner"}}),(i=a=e.NavDir||(e.NavDir={})).FORWARD="forward",i.BACKWARD="backward",e.GET_NAV_DIR=function(t){const{curr:s,dest:a}=t;if(void 0===s)return"forward";let r=s;for(;r!==e.NavTree[r].prev;)if(r=e.NavTree[r].prev,r===a)return"backward";return"forward"}})(m||(m={})),Object.freeze(m),Object.freeze(m.prototype);const u={this:"VOStzrCioiYo3QnWHfoW",nav:"WpEFHlxQEa94dqy7WNKY","nav--play-offline":"DEP5PFVIIVg0fRPEDAHe","nav--play-online":"lobln6lt9f3ZUbU8XCWx","nav--learning":"Pm7x5x_ddFOZoCt4vcOf","nav--how-to-host":"V7r3gSyjONulvFFMwlPw","nav--settings":"vHTedVpS1e4jUwlyqL0s","nav--goto-repo":"vTsM0yN6Manm_xDM1vS5","nav--report-issue":"aFZBtPJ3XaYdHclqXs_6"};class v extends m{_abstractLazyLoad(){Object.freeze(this),this.baseElem.classList.add(a.General.Class.CENTER_CONTENTS,u.this);const e=r.R.html("div",[a.General.Class.INPUT_GROUP,u.nav]);e.setAttribute("role","navigation"),e.addEventListener("pointerleave",(()=>{var t;(null==(t=document.activeElement)?void 0:t.parentElement)===e&&document.activeElement.blur()}));const t=(t,s)=>{t.classList.add(a.General.Class.CENTER_CONTENTS,a.General.Class.INPUT_GROUP_ITEM,s.cssClass),t.textContent=s.text,t.addEventListener("pointerenter",(()=>{window.requestAnimationFrame((e=>{t.focus()}))})),e.appendChild(t)};[{text:"Offline\nSingle-player",cssClass:u["nav--play-offline"],screenId:m.Id.SETUP_OFFLINE},{text:"Online\nMulti-player",cssClass:u["nav--play-online"],screenId:m.Id.GROUP_JOINER},{text:"Learning Resources",cssClass:u["nav--learning"],screenId:m.Id.LEARNING},{text:"How To Host",cssClass:u["nav--how-to-host"],screenId:m.Id.HOW_TO_HOST},{text:"Settings",cssClass:u["nav--settings"],screenId:m.Id.SETTINGS}].map((e=>Object.freeze(e))).forEach((e=>{const s=r.R.html("button");s.addEventListener("click",(t=>{this.requestGoToScreen(e.screenId,void 0)})),t(s,e)})),[{text:"Source\nCode",cssClass:u["nav--goto-repo"],href:new window.URL("https://github.com/david-fong/capswalk")},{text:"Report\na Bug",cssClass:u["nav--report-issue"],href:new window.URL("https://github.com/david-fong/capswalk/issues")}].map((e=>Object.freeze(e))).forEach((e=>{const s=r.R.html("a",[],{href:e.href.toString(),target:"_blank"});t(s,e)})),this.baseElem.appendChild(e)}}Object.freeze(v),Object.freeze(v.prototype);class f extends m{_abstractLazyLoad(){Object.freeze(this)}}Object.freeze(f),Object.freeze(f.prototype);class b extends m{_abstractLazyLoad(){Object.freeze(this)}}(b||(b={})).INSTRUCTIONS_STEPS=Object.freeze(["$ npm install 'https://github.com/david-fong/capswalk#gh-pages'","$ npm run start","send the url to your friends"]),Object.freeze(b),Object.freeze(b.prototype);const E=JSON.parse('[{"id":"default","displayName":"Default","author":"N.W."},{"id":"murky-dive","displayName":"Murky Dive","author":"Stressed Dav"},{"id":"smooth-stone","displayName":"Smooth Stone","author":"Dav"}]');var O=s(254);var g,y,S,w,_,N,T,L,I,R,C=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},P=(e,t,s)=>(C(e,t,"read from private field"),s?s.call(e):t.get(e)),A=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},G=(e,t,s,a)=>(C(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s),k=(e,t,s)=>(C(e,t,"access private method"),s);class j{constructor(){A(this,w),A(this,N),A(this,g,void 0),A(this,y,void 0),A(this,S,void 0);const e=r.R.html("div",["AKJZkhmeuJE87e_Ci6x9"],{tabIndex:0});e.setAttribute("role","listbox"),e.addEventListener("keydown",k(this,N,T).bind(this)),e.addEventListener("pointerenter",(t=>{window.requestAnimationFrame((t=>{e.focus()}))})),this.baseElem=e,this.options=[]}addOption(e){this.options.push(e),this.baseElem.appendChild(e.baseElem),e.baseElem.addEventListener("pointerenter",this.hoverOpt.bind(this,e)),e.baseElem.addEventListener("click",this.selectOpt.bind(this,e,!0)),e._registerParent(k(this,w,_).bind(this))}hoverOpt(e){var t;this.hoveredOpt!==e&&(null==(t=this.hoveredOpt)||t.baseElem.setAttribute("aria-active-descendant","false"),G(this,y,e),this.hoveredOpt.baseElem.setAttribute("aria-active-descendant","true"))}selectOpt(e,t=!0){var s;if(!e)throw new Error("opt must be defined");this.hoverOpt(e),this.confirmedOpt!==e&&(null==(s=this.confirmedOpt)||s.baseElem.setAttribute("aria-selected","false"),G(this,g,e),this.confirmedOpt.baseElem.setAttribute("aria-selected","true"),t&&this._onSelectOpt(e))}get confirmedOpt(){return P(this,g)}get hoveredOpt(){return P(this,y)}set _isValid(e){this._isValid!==e&&(this.baseElem.setAttribute("aria-invalid",e?"false":"true"),G(this,S,e))}get _isValid(){return P(this,S)}}g=new WeakMap,y=new WeakMap,S=new WeakMap,w=new WeakSet,_=function(e){this.confirmedOpt===e&&(this._isValid=!e.disabled)},N=new WeakSet,T=function(e){if(" "===e.key||"Enter"===e.key)return this.selectOpt(this.hoveredOpt),e.preventDefault(),!1;{const t=this.options.indexOf(this.hoveredOpt);if("ArrowDown"===e.key||"Down"===e.key)for(let s=t+1;s<this.options.length;s++){const t=this.options[s];if(!t.disabled)return this.hoverOpt(t),e.preventDefault(),!1}else if("ArrowUp"===e.key||"Up"===e.key)for(let s=t-1;s>=0;s--){const t=this.options[s];if(!t.disabled)return this.hoverOpt(t),e.preventDefault(),!1}}return!0},L=j||(j={}),I=new WeakMap,R=new WeakMap,L._Option=class{constructor(){A(this,I,void 0),A(this,R,void 0),(this.baseElem=r.R.html("div",["JBB1442ZtSbNCSHuzXxt"])).setAttribute("role","option"),G(this,I,!1)}_registerParent(e){G(this,R,e)}get disabled(){return P(this,I)}set disabled(e){this.disabled!==e&&(this.baseElem.setAttribute("aria-disabled",e?"true":"false"),G(this,I,e),P(this,R).call(this,this))}},Object.freeze(L),Object.freeze(L.prototype),Object.freeze(j),Object.freeze(j.prototype);var z,U,M=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},x=(e,t,s)=>(M(e,t,"read from private field"),s?s.call(e):t.get(e)),W=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},D=(e,t,s,a)=>(M(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s);const B=class extends j{constructor(e){super(),W(this,z,void 0),W(this,U,void 0),D(this,z,!0),D(this,U,e),H.Schemes.forEach((e=>{this.addOption(new B.Option(e))})),this.selectOpt(this.getOptById(O.s.Local.colourSchemeId),!1)}_onHoverOpt(e){}_onSelectOpt(e){O.s.Local.colourSchemeId=e.desc.id,O.s.Local.colourSchemeStyleLiteral=e.cssLiteral;const t=x(this,z);D(this,z,!1),x(this,U).do({intermediateTransitionTrigger:()=>{document.documentElement.dataset[a.General.Dataset.COLOUR_SCHEME]=e.desc.id;const s=document.documentElement.style;if(t)for(const e of H.Swatch){const t="--colour-"+e;s.setProperty(t,"")}}})}getOptById(e){return this.options.find((t=>t.desc.id===e))}};let F=B;var H,J;z=new WeakMap,U=new WeakMap,(e=>{class t extends j._Option{constructor(e){super(),this.desc=e;const s=this.baseElem;s.classList.add("eVf4GwOfNNHlWwODZJsX"),s.dataset[a.General.Dataset.COLOUR_SCHEME]=e.id;const i=r.R.html("span",["HAJONDj8Tm_wq7OdK5IF"]);i.appendChild(r.R.html("div",["ouTfaE0SiX_HgddEhVZm"],{textContent:e.displayName})),i.appendChild(r.R.html("div",["nZ0Xz3ytlP6LxcYqfTiX"],{textContent:"by "+e.author})),s.appendChild(i);for(let e=0;e<t.NUM_PREVIEW_SLOTS-1;e++)s.appendChild(r.R.html("span"));document.body.appendChild(s);let n="";const o=window.getComputedStyle(s);for(const e of H.Swatch){const t="--colour-"+e;n+=t+":"+o.getPropertyValue(t)+";"}this.cssLiteral=n}}e.Option=t,(t=e.Option||(e.Option={})).NUM_PREVIEW_SLOTS=8,Object.freeze(t),Object.freeze(t.prototype)})(F||(F={})),Object.freeze(F),Object.freeze(F.prototype),(J=H||(H={})).Swatch=Object.freeze(["mainFg","mainBg","tileFg","tileBg","tileBd","healthFg","healthBg","pFaceMe","pFaceMeOppo","pFaceTeammate","pFaceOpponent"]),J.Schemes=r.R.deepFreeze(Array.from(E)),Object.freeze(H);class q extends j{constructor(){super(),this.addOption(new q.Option("system")),this.addOption(new q.Option("twemoji")),this.selectOpt(this.getOptById(O.s.Local.emojiFont),!1)}_onHoverOpt(e){}_onSelectOpt(e){O.s.Local.emojiFont=e.desc}getOptById(e){return this.options.find((t=>t.desc===e))}}(e=>{class t extends j._Option{constructor(e){super(),this.desc=e,this.baseElem.textContent=e}}e.Option=t,Object.freeze(t),Object.freeze(t.prototype)})(q||(q={})),Object.freeze(q),Object.freeze(q.prototype);class V extends m{_abstractLazyLoad(){s(649)("./undefined.css").catch((e=>{})),this.baseElem.classList.add("LZzBP3yerfPFg_jWkFbC"),this.baseElem.appendChild(this.nav.prev);{const e=new F(this.top.transition);this.baseElem.appendChild(e.baseElem)}{const e=new q;this.baseElem.appendChild(e.baseElem)}this.baseElem.appendChild(V._mkMoreAnimationsCheckBox())}}(V||(V={}))._mkMoreAnimationsCheckBox=function(){const e=r.R.html("div"),t=Math.random().toString(),s=r.R.html("label",[],{textContent:"Enable more animations (consumes slightly more battery)",htmlFor:t}),a=r.R.html("input",[],{type:"checkbox",id:t});return a.checked=O.s.Local.moreAnimations,a.addEventListener("change",(()=>{O.s.Local.moreAnimations=a.checked})),e.appendChild(s),e.appendChild(a),e},Object.freeze(V),Object.freeze(V.prototype);var Y=s(986),Z=s(173),K=s(248);var X,Q,$,ee,te=Object.defineProperty,se=Object.getOwnPropertySymbols,ae=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable,ie=(e,t,s)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,ne=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},oe=(e,t,s)=>(((e,t,s)=>{if(!t.has(e))throw TypeError("Cannot access private method")})(e,t),s);const le=class extends m{constructor(){super(...arguments),ne(this,X),ne(this,$),this.langSel=new le.LangPickOne}_abstractLazyLoad(){this.baseElem.classList.add("dM0sAAbTsls3njufmOZH"),this.baseElem.appendChild(this.nav.prev),this.baseElem.appendChild(this.langSel.baseElem),oe(this,X,Q).call(this),r.R.propNoWrite(this,"langSel","langWeightExaggeration"),this.baseElem.appendChild(this.nav.next),oe(this,$,ee).call(this)}getRecommendedFocusElem(){return this.nav.next}parseArgsFromGui(){const e=((e,t)=>{for(var s in t||(t={}))ae.call(t,s)&&ie(e,s,t[s]);if(se)for(var s of se(t))re.call(t,s)&&ie(e,s,t[s]);return e})({},le.DEFAULT_PRESET());return e.langId=this.langSel.confirmedOpt.desc.id,e.langWeightExaggeration=parseFloat(this.langWeightExaggeration.value),e}};let he=le;X=new WeakSet,Q=function(){const e=this.langWeightExaggeration=r.R.html("input",["Qw_2Yj23N_vf_TEtYuZL"],{type:"range",min:"0",max:Z.Uo.WeightExaggeration.MAX.toString(),step:"any",value:"1"});{const e=r.R.html("datalist");e.id=a.Screen.Impl.Setup.Id.LANG_WEIGHT_EXAGGERATION_LIST,[{val:0,label:"0"},{val:1,label:"1"}].forEach((t=>{e.appendChild(r.R.html("option",[],{value:t.val.toString(),label:t.label}))})),this.baseElem.appendChild(e)}e.setAttribute("list",a.Screen.Impl.Setup.Id.LANG_WEIGHT_EXAGGERATION_LIST),this.baseElem.appendChild(e)},$=new WeakSet,ee=function(){O.s.Local.gamePresetId,O.s.IDB.UserGamePresetStore},(e=>{e.DEFAULT_PRESET=()=>({coordSys:"Euclid2",gridDimensions:{height:10,width:10,_render:{wrapX:2,wrapY:2}},langWeightExaggeration:1,langId:"engl-low",players:[{familyId:"Chaser",teamId:1,username:"chaser1",avatar:Z.J5.Avatar.GET_RANDOM(),familyArgs:{}},{familyId:"Chaser",teamId:1,username:"chaser2",avatar:Z.J5.Avatar.GET_RANDOM(),familyArgs:{fearDistance:6,bloodThirstDistance:5,healthReserve:5,keyPressesPerSecond:1.2}}]});class t extends j{constructor(){super(),this.baseElem.classList.add("noOHRxnAjc66rwIz55iq"),Object.values(K.b).freeze().forEach((e=>{this.addOption(new t.Option(e))})),this.selectOpt(this.options[0])}_onHoverOpt(e){}_onSelectOpt(e){}}e.LangPickOne=t,(e=>{class t extends j._Option{constructor(e){super(),this.desc=e,this.baseElem.textContent=e.displayName}}e.Option=t,Object.freeze(t),Object.freeze(t.prototype)})(t=e.LangPickOne||(e.LangPickOne={})),Object.freeze(t),Object.freeze(t.prototype)})(he||(he={})),Object.freeze(he),Object.freeze(he.prototype);class de extends he{_abstractLazyLoad(){super._abstractLazyLoad(),Object.freeze(this),this.nav.next.onclick=e=>{const t=this.parseArgsFromGui();this.requestGoToScreen(m.Id.PLAY_OFFLINE,[t])}}parseArgsFromGui(){const e=super.parseArgsFromGui();return e.players.splice(e.players.length,0,{familyId:"Human",teamId:0,socket:void 0,username:"hello1",avatar:Y.J.Avatar.GET_RANDOM()},{familyId:"Human",teamId:1,socket:void 0,username:"hello2",avatar:Y.J.Avatar.GET_RANDOM()}),e}}Object.freeze(de),Object.freeze(de.prototype);var ce=s(315);var pe,me,ue,ve,fe=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},be=(e,t,s)=>(((e,t,s)=>{if(!t.has(e))throw TypeError("Cannot access private method")})(e,t),s);const Ee=class extends m{constructor(){super(...arguments),fe(this,pe),fe(this,ue),this.playersBar=r.R.html("div",["Ek_E8Dtx0sW9zg8bU0xn"]),this.seqBuffer=r.R.html("span",["IWdDGtoPHGwAbNhpI8gK"])}_abstractLazyLoad(){this.baseElem.classList.add(a.General.Class.CENTER_CONTENTS,"mnX7wCSxpAGRiDijhG7A");const e=Ee.createGridWrapper();this.grid=Object.freeze({base:e.top,implHost:e.implHost,pauseOl:e.pauseOl}),r.R.propNoWrite(this,"grid","playersBar"),r.R.Web.prependComment(this.grid.implHost,"grid impl host"),this.grid.implHost.appendChild(document.createComment("grid impl")),e.grid.appendChild(this.seqBuffer),this.baseElem.appendChild(e.top),e.pauseOl.addEventListener("click",(e=>{const t=this.currentGame;void 0!==t&&t.status===ce.l.Status.PAUSED&&(this.grid.base.focus(),this._reqStatusPlaying())})),be(this,pe,me).call(this),be(this,ue,ve).call(this)}_resetGame(){this.currentGame.reset(),this.btn.pause.disabled=!1,this._wantsAutoPlayPause&&this._reqStatusPlaying()}};let Oe=Ee;pe=new WeakSet,me=function(){const e=r.R.html("div",[a.General.Class.CENTER_CONTENTS,a.General.Class.INPUT_GROUP,"cQvMuJLP0eXcSOtutQ9w"]);function t(t,s){return(s=null!=s?s:r.R.html("button")).classList.add(a.General.Class.INPUT_GROUP_ITEM),s.textContent=t,s.addEventListener("pointerenter",(e=>{s.focus()})),e.appendChild(s),s}e.setAttribute("role","menu"),e.addEventListener("pointerleave",(e=>{this.grid.base.focus()})),t("<Back Button Text>",this.nav.prev),this.btn=Object.freeze({pause:t(""),reset:t("Reset")}),r.R.propNoWrite(this,"btn"),this.btn.reset.onclick=this._resetGame.bind(this),this.baseElem.appendChild(e)},ue=new WeakSet,ve=function(){r.R.propNoWrite(this),this.baseElem.appendChild(this.playersBar)},(Oe||(Oe={})).createGridWrapper=function(){const e=a.General.Class,t=r.R.html("div",["_XorK34gYeF3rDV34pc8"]);t.setAttribute("role","presentation");const s=r.R.html("div",["sZYqwsT6uDzZBoImUxvw"],{tabIndex:0});s.setAttribute("role","textbox"),s.setAttribute("aria-label","Game Grid");const i=r.R.html("div",["ENc7RuGUrv5kf3m3VDaO"]);i.setAttribute("role","presentation");const n=r.R.html("div",[e.FILL_PARENT,e.CENTER_CONTENTS,"zhYA6tPy2EU7UUpRxCRy"],{});return n.appendChild(r.R.html("div",[],{textContent:"(Click to Unpause)"})),i.appendChild(n),s.appendChild(i),t.appendChild(s),Object.freeze({top:t,grid:s,intersectionRoot:i,implHost:i,pauseOl:n})},r.R.instNoEnum(Oe,"createGridWrapper"),Object.freeze(Oe),Object.freeze(Oe.prototype);var ge,ye,Se,we,_e,Ne,Te=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},Le=(e,t,s)=>(Te(e,t,"read from private field"),s?s.call(e):t.get(e)),Ie=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},Re=(e,t,s,a)=>(Te(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s);class Ce extends Oe{constructor(){super(...arguments),Ie(this,_e),Ie(this,ge,void 0),Ie(this,ye,void 0),Ie(this,Se,void 0),Ie(this,we,void 0)}_abstractLazyLoad(){var e,t;super._abstractLazyLoad(),Re(this,ye,(()=>{if(this._wantsAutoPlayPause)if(document.hidden){if(void 0===Le(this,we)){const e=this.currentGame;(void 0===e||void 0!==e&&e.status!==ce.l.Status.OVER)&&this._reqStatusPaused()}}else"page-hide"===Le(this,we)&&this._reqStatusPlaying()})),Re(this,Se,(this,e=_e,t=Ne,Te(this,e,"access private method"),t).bind(this))}async _abstractOnBeforeEnter(e,t){document.addEventListener("visibilitychange",Le(this,ye)),this.btn.pause.disabled=!0,this._statusBecomePaused();const s=Re(this,ge,await this._createNewGame(t));await s.reset(),this.grid.implHost.appendChild(s.grid.baseElem),this.btn.pause.onclick=this._reqStatusPlaying.bind(this),this.btn.pause.disabled=!1,this._wantsAutoPlayPause&&setTimeout((()=>{document.hidden||this._reqStatusPlaying()}),100),this.grid.base.addEventListener("keydown",Le(this,Se),{capture:!0})}_abstractOnBeforeLeave(e){if(this._askConfirmBeforeLeave&&!this.top.confirm("Are you sure you would like to leave?"))return!1;document.removeEventListener("visibilitychange",Le(this,ye)),this.currentGame.statusBecomeOver();for(const e of[this.currentGame.grid.baseElem])e.textContent="",e.remove();return this.grid.base.removeEventListener("keydown",Le(this,Se)),Re(this,ge,void 0),!0}get currentGame(){return Le(this,ge)}get probeCurrentGame(){return Le(this,ge)}_reqStatusPlaying(){this._statusBecomePlaying()}_reqStatusPaused(){this._statusBecomePaused()}_statusBecomePlaying(){this.currentGame.statusBecomePlaying(),this.btn.pause.textContent="Pause",this.grid.pauseOl.style.visibility="hidden",Re(this,we,void 0),this.btn.pause.onclick=this._reqStatusPaused.bind(this),this.btn.reset.disabled=!0,this.grid.base.focus()}_statusBecomePaused(){var e;null==(e=this.currentGame)||e.statusBecomePaused(),this.btn.pause.textContent="Unpause",this.grid.pauseOl.style.visibility="visible",Re(this,we,document.hidden?"page-hide":"other"),this.btn.pause.onclick=this._reqStatusPlaying.bind(this),this.btn.reset.disabled=!1}_onGameBecomeOver(){this.btn.pause.disabled=!0,this.btn.reset.disabled=!1}}ge=new WeakMap,ye=new WeakMap,Se=new WeakMap,we=new WeakMap,_e=new WeakSet,Ne=function(e){if(e.stopPropagation(),!e.isTrusted)return!0;const t=this.currentGame;if(e.ctrlKey&&" "===e.key&&!e.repeat){const e=t.clientPlayers;t.setCurrentClientPlayer((1+e.indexOf(t.currentClientPlayer))%e.length)}else{const s=t.currentClientPlayer.processKeyboardInput(e);this.seqBuffer.textContent=s}return" "!==e.key||(e.preventDefault(),!1)},r.R.protoNoEnum(Ce,"probeCurrentGame","_statusBecomePlaying","_statusBecomePaused"),Object.freeze(Ce),Object.freeze(Ce.prototype);class Pe extends Ce{constructor(){super(...arguments),this._wantsAutoPlayPause=!1,this._askConfirmBeforeLeave=!0}_abstractLazyLoad(){super._abstractLazyLoad(),Object.freeze(this),this.nav.prev.innerHTML="Back&nbsp;To Setup"}async _createNewGame(e){return new((await Promise.all([s.e(68),s.e(622),s.e(755)]).then(s.bind(s,900))).OfflineGame)(this._onGameBecomeOver.bind(this),e[0])}}Object.freeze(Pe),Object.freeze(Pe.prototype);var Ae=s(634);var Ge,ke,je,ze=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},Ue=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)};class Me extends m{constructor(){super(...arguments),Ue(this,ke),Ue(this,Ge,void 0),this.groupNameDataList=r.R.html("datalist",[],{id:a.ID.CURRENT_HOST_GROUPS})}get state(){return ze(this,e=Ge,"read from private field"),e.get(this);var e}_abstractLazyLoad(){this.baseElem.classList.add(a.General.Class.CENTER_CONTENTS,"O2aU4qzlujy5fgaT8Fq0");const e=(this,t=ke,s=je,ze(this,t,"access private method"),s).call(this);var t,s;this.baseElem.appendChild(this.groupNameDataList),this.nav.prev.classList.add(a.General.Class.INPUT_GROUP_ITEM),this.nav.next.classList.add(a.General.Class.INPUT_GROUP_ITEM),e.appendChild(this.nav.prev),e.appendChild(this.nav.next),this.nav.next.onclick=e=>{this.requestGoToScreen(m.Id.GROUP_LOBBY,void 0)},this._setFormState(xe.CHOOSING_SERVER),this.baseElem.appendChild(e)}_setFormState(e){if(this.state!==e){if(this.in.passphrase.disabled=!0,e===xe.IN_GROUP){if(this.state!==xe.CHOOSING_GROUP)throw new Error("never");this.nav.next.disabled=!1,this.nav.next.focus()}else this.nav.next.disabled=!0,this.in.passphrase.value="",e===xe.CHOOSING_SERVER?(this.in.groupName.disabled=!0,this.in.groupName.value="",this.groupNameDataList.textContent="",this.in.serverUrl.focus()):e===xe.CHOOSING_GROUP&&(this.in.groupName.disabled=!1,this.in.passphrase.disabled=!1,this.in.groupName.focus());var t,s;s=e,ze(this,t=Ge,"write to private field"),t.set(this,s)}}}Ge=new WeakMap,ke=new WeakSet,je=function(){const e=r.R.html("div",[a.General.Class.INPUT_GROUP,"Ofu1xR4TmnnYiAYliNDC"],{});function t(t,s){const i=r.R.html("input",[a.General.Class.INPUT_GROUP_ITEM,s],{type:"text",autocomplete:"off",spellcheck:!1}),n=r.R.html("label",[],{textContent:t});return n.appendChild(i),e.appendChild(n),i}this.in=Object.freeze({serverUrl:Object.assign(t("Server URL","qFPA7PafKphTjM8H5Bd0"),{type:"url",maxLength:128,autocomplete:"on",required:!0}),groupName:Object.assign(t("Group Name","GXbTbBanObUwXHHHTh_L"),{pattern:Ae.ZA.Name.REGEXP.source,minLength:1,maxLength:Ae.ZA.Name.MaxLength,autocomplete:"on",required:!0}),passphrase:Object.assign(t("Group Passphrase","vPP6sO6S6O12l2sZhuEs"),{pattern:Ae.ZA.Passphrase.REGEXP.source,maxLength:Ae.ZA.Passphrase.MaxLength})}),this.in.groupName.setAttribute("list",a.ID.CURRENT_HOST_GROUPS);{this.in.serverUrl.setAttribute("list",a.ID.PUBLIC_GAME_SERVER_URLS);const e=Ht.SiteServerTypeSuggestedGameServer[this.top.siteServerType];if(e){const t=r.R.html("option",[],{value:e.value,textContent:e.description});document.getElementById(a.ID.PUBLIC_GAME_SERVER_URLS).insertAdjacentElement("afterbegin",t),this.in.serverUrl.value=t.value}}return r.R.propNoWrite(this,"in","groupNameDataList"),e},(e=>{let t;var s;(s=t=e.State||(e.State={})).CHOOSING_SERVER="choosing-server",s.CHOOSING_GROUP="choosing-group",s.IN_GROUP="in-group"})(Me||(Me={}));const xe=Me.State;Object.freeze(Me),Object.freeze(Me.prototype);var We,De,Be,Fe,He,Je,qe,Ve,Ye,Ze=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},Ke=(e,t,s)=>(Ze(e,t,"read from private field"),s?s.call(e):t.get(e)),Xe=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},Qe=(e,t,s,a)=>(Ze(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s),$e=(e,t,s)=>(Ze(e,t,"access private method"),s);class et extends Me{constructor(){super(...arguments),Xe(this,Fe),Xe(this,Je),Xe(this,Ve),Xe(this,We,!1),Xe(this,De,!1),Xe(this,Be,void 0)}get isHost(){return Ke(this,De)}get ws(){return this.top.webSocket}_abstractLazyLoad(){super._abstractLazyLoad(),Qe(this,Be,(e=>{const[t,...s]=JSON.parse(e.data);switch(t){case Ae.oU.Create.NAME:$e(this,Je,qe).call(this,s[0]);break;case Ae.oU.Exist.NAME:$e(this,Ve,Ye).call(this,s[0]);break;case Ae.oU.TryJoin.NAME:this._setFormState(tt.IN_GROUP);break;case Ae.m4.CREATE_GAME:this.requestGoToScreen(m.Id.PLAY_ONLINE,[s[0],s[1]])}}));const e=$e(this,Fe,He).call(this);this._initGroupNameCbs(e),this._initPassphraseCbs(),Object.seal(this)}getRecommendedFocusElem(){return void 0===this.ws?this.in.serverUrl:this.in.groupName}_initGroupNameCbs(e){const t=this.in.groupName;t.addEventListener("input",(t=>{t.isTrusted&&(this.state===tt.IN_GROUP&&e(),this.in.passphrase.value="",Qe(this,De,!1))}));const s=()=>{t.value&&t.validity.valid&&(this.state===tt.IN_GROUP?this.nav.next.focus():this.in.passphrase.focus())};t.addEventListener("keydown",(e=>{e.isTrusted&&"Enter"===e.key&&s()})),t.addEventListener("change",(e=>{e.isTrusted&&s()}))}_initPassphraseCbs(){const e=()=>{if(!this.in.passphrase.validity.valid)return;Ke(this,We)&&this._setFormState(tt.IN_GROUP);const e=this.in.groupName.value;Array.from(this.groupNameDataList.children).some((t=>t.value===e))?(Qe(this,De,!1),this._attemptToJoinExistingGroup()):(Qe(this,De,!0),this.ws.send(JSON.stringify([Ae.oU.Create.NAME,Object.freeze({groupName:this.in.groupName.value,passphrase:this.in.passphrase.value})])))};this.in.passphrase.addEventListener("keydown",(t=>{t.isTrusted&&"Enter"===t.key&&e()}))}_attemptToJoinExistingGroup(){this.ws.send(JSON.stringify([Ae.oU.TryJoin.NAME,{groupName:this.in.groupName.value,passphrase:this.in.passphrase.value,userInfo:O.s.getLastUserInfo()}]))}}We=new WeakMap,De=new WeakMap,Be=new WeakMap,Fe=new WeakSet,He=function(){const e=this.top,t=this.in.serverUrl;t.addEventListener("input",(e=>{this._setFormState(tt.CHOOSING_SERVER)}));const s=()=>{t.value&&t.validity.valid&&(void 0===this.ws||new URL(this.ws.url).hostname!==new URL(t.value).hostname?(this.top.setWebSocket(new WebSocket(t.value)),this.ws.addEventListener("open",(e=>{this._setFormState(tt.CHOOSING_GROUP)})),this.ws.addEventListener("message",Ke(this,Be)),this.ws.addEventListener("close",(t=>{this.top.setWebSocket(void 0),this._setFormState(tt.CHOOSING_SERVER),e.toast("You disconnected you from the server."),this.top.currentScreen!==this&&this.requestGoToScreen(m.Id.GROUP_JOINER,void 0)}),{once:!0})):Ke(this,We)&&this._setFormState(tt.CHOOSING_GROUP))};return t.addEventListener("keydown",(e=>{e.isTrusted&&"Enter"===e.key&&s()})),t.addEventListener("paste",(e=>{e.isTrusted&&window.setTimeout((()=>s()),0)})),t.addEventListener("change",(e=>{e.isTrusted&&s()})),s},Je=new WeakSet,qe=function(e){return e?(this.top.toast(`server accepted request to create new group "${this.in.groupName.value}".`),this.top.toast("connecting to new group..."),void this._attemptToJoinExistingGroup()):(Qe(this,We,!0),void this.top.toast(`The server rejected your request to create a new group "${this.in.groupName.value}".`))},Ve=new WeakSet,Ye=function(e){const t=e=>{const t=r.R.html("option",[],{value:e});for(const e of s)if(t.value.localeCompare(e.value)<0){this.groupNameDataList.insertBefore(t,e);break}return t.parentElement||this.groupNameDataList.appendChild(t),t},s=Array.from(this.groupNameDataList.children);Object.entries(e).freeze().forEach((([e,a])=>{var r;const i=null!=(r=s.find((t=>t.value===e)))?r:t(e);switch(a){case Ae.oU.Exist.Status.IN_LOBBY:i.textContent="In Lobby";break;case Ae.oU.Exist.Status.IN_GAME:i.textContent="In Game";break;case Ae.oU.Exist.Status.DELETE:i.remove()}}))};const tt=Me.State;Object.freeze(et),Object.freeze(et.prototype);class st extends he{_abstractLazyLoad(){super._abstractLazyLoad(),Object.freeze(this),this.nav.next.textContent="Start Game",this.nav.next.onclick=e=>{const t=this.parseArgsFromGui();this.top.clientIsGroupHost&&this.top.webSocket.send(JSON.stringify([Ae.m4.CREATE_GAME,t]))}}}Object.freeze(st),Object.freeze(st.prototype);var at,rt,it,nt,ot,lt=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},ht=(e,t,s)=>(lt(e,t,"read from private field"),s?s.call(e):t.get(e)),dt=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},ct=(e,t,s,a)=>(lt(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s),pt=(e,t,s)=>(lt(e,t,"access private method"),s);const mt=class extends m{constructor(){super(...arguments),dt(this,rt),dt(this,nt),this.players=new Map,this.teamsElem=r.R.html("div",["KxEnifwXvwA90B_KkpOP"]),this.teamElems=new Map,dt(this,at,void 0)}get ws(){return this.top.webSocket}_abstractLazyLoad(){this.baseElem.classList.add("FrQ_WeV9SdJ23HCJrscN"),pt(this,rt,it).call(this),ct(this,at,(e=>{const[t,...s]=JSON.parse(e.data);t===Ae.m4.UserInfo.NAME&&this._onUserInfoChange(s[0])})),Object.freeze(this),this.nav.prev.textContent="Return To Joiner",this.baseElem.appendChild(this.teamsElem),r.R.propNoWrite(this,"players","teamsElem","teamElems","in");{const e=this.nav.next;e.textContent="Setup Game",e.onclick=()=>{this.requestGoToScreen(m.Id.SETUP_ONLINE,void 0)},this.baseElem.appendChild(e)}}async _abstractOnBeforeEnter(e,t){"forward"===e&&(this.nav.next.disabled=!this.top.clientIsGroupHost,this.players.clear(),this.teamElems.clear(),this.teamsElem.textContent="",pt(this,nt,ot).call(this),this.ws.addEventListener("message",ht(this,at)))}getRecommendedFocusElem(){let e=this.in.username.validity.valid?this.in.teamId.validity.valid?void 0:this.in.teamId:this.in.username;return void 0===e&&(e=this.top.clientIsGroupHost?this.nav.next:this.in.teamId),e}_abstractOnBeforeLeave(e){return e===m.NavDir.BACKWARD&&this.ws.removeEventListener("message",ht(this,at)),!0}_onUserInfoChange(e){Object.freeze(Object.entries(e)).forEach((([e,t])=>{const s=this.players.get(e);if(!s||1!==this.teamElems.get(s.teamId).childElementCount||null!==t&&t.teamId===s.teamId||(this.teamElems.get(s.teamId).remove(),this.teamElems.delete(s.teamId)),t&&!this.teamElems.has(t.teamId)){const e=r.R.html("div",["rj6_0SgCqgeOr1vpJp1g"]);this.teamElems.set(t.teamId,e),e.onclick=e=>{this.in.teamId.value=t.teamId.toString()},this.teamsElem.appendChild(e)}if(null===t)s.base.remove(),this.players.delete(e);else if(void 0===s){const s=new mt.UserInfo(t);this.players.set(e,s),this.teamElems.get(t.teamId).appendChild(s.base)}else s.update(t)})),this.in.teamId.max=Object.keys(this.players).length.toString()}};let ut=mt;var vt,ft,bt,Et;at=new WeakMap,rt=new WeakSet,it=function(){const e=r.R.html("div",[a.General.Class.INPUT_GROUP,"_alQ7LWNlk3bY10mqUxT"]),t=r.R.html("input",[a.General.Class.INPUT_GROUP_ITEM],{type:"text",minLength:1,maxLength:Z.J5.Username.MAX_LENGTH,pattern:Z.J5.Username.REGEXP.source,spellcheck:!1,value:O.s.Local.username,onchange:pt(this,nt,ot).bind(this)});e.appendChild(t);const s=r.R.html("input",[a.General.Class.INPUT_GROUP_ITEM],{type:"number",min:"0",max:"0",step:"1",value:"0",onchange:pt(this,nt,ot).bind(this)});s.classList.add(),e.appendChild(s);const i=r.R.html("select");this.in=Object.freeze({username:t,teamId:s,avatar:i}),this.baseElem.appendChild(e)},nt=new WeakSet,ot=function(){if(!this.in.username.validity.valid||!this.in.teamId.validity.valid)return;const e=O.s.Local;e.username=this.in.username.value,e.avatar=this.in.avatar.value;const t={username:this.in.username.value,teamId:parseInt(this.in.teamId.value),avatar:Z.J5.Avatar.GET_RANDOM()};this.ws.send(JSON.stringify([Ae.m4.UserInfo.NAME,t]))},vt=ut||(ut={}),ft=new WeakMap,bt=new WeakMap,Et=new WeakMap,vt.UserInfo=class{constructor(e){dt(this,ft,void 0),dt(this,bt,void 0),dt(this,Et,void 0),this.base=r.R.html("div",["QQcOQ7mZyU8WD_ubQI2O"]);const t=()=>{const e=r.R.html("div");return this.base.appendChild(e),e};this.el=Object.freeze({username:t(),teamId:t(),avatar:t()}),this.el.username.classList.add("S5ZCeslJfkbbRHd_KJms"),this.username=e.username,this.teamId=e.teamId,r.R.propNoWrite(this,"base","el")}update(e){this.username=e.username,this.teamId=e.teamId,this.avatar=e.avatar}get username(){return ht(this,ft)}set username(e){this.el.username.textContent=e,ct(this,ft,e)}get teamId(){return ht(this,bt)}set teamId(e){this.el.teamId.textContent=e.toString(),ct(this,bt,e)}get avatar(){return ht(this,Et)}set avatar(e){ct(this,Et,e),this.el.avatar}},Object.freeze(ut),Object.freeze(ut.prototype);var Ot,gt=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},yt=(e,t,s)=>(gt(e,t,"read from private field"),s?s.call(e):t.get(e));class St extends Ce{constructor(){super(...arguments),this._askConfirmBeforeLeave=!1,this._wantsAutoPlayPause=!1,((e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,void 0)})(this,Ot)}get ws(){return this.top.webSocket}_abstractLazyLoad(){var e,t;super._abstractLazyLoad(),Object.freeze(this),this.nav.prev.innerHTML="Back&nbsp;To Lobby",t=e=>{const[t,...s]=JSON.parse(e.data);switch(t){case Ae.JD.UNPAUSE:this._statusBecomePlaying();break;case Ae.JD.PAUSE:this._statusBecomePaused();break;case Ae.JD.RETURN_TO_LOBBY:void 0===s[0]&&this.nav.prev.click();break;default:this.currentGame.wsMessageCb(e)}},gt(this,e=Ot,"write to private field"),e.set(this,t),Object.seal(this)}_abstractOnBeforeLeave(e){const t=super._abstractOnBeforeLeave(e);return t&&void 0!==this.ws&&(this.ws.send(JSON.stringify([Ae.JD.RETURN_TO_LOBBY])),this.ws.removeEventListener("message",yt(this,Ot))),t}_reqStatusPlaying(){this.ws.send(JSON.stringify([Ae.JD.UNPAUSE]))}_reqStatusPaused(){this.ws.send(JSON.stringify([Ae.JD.PAUSE]))}async _createNewGame(e){const[t,a]=e,r=new((await Promise.all([s.e(68),s.e(622),s.e(775)]).then(s.bind(s,953))).OnlineGame)(this.top.webSocket,this._onGameBecomeOver.bind(this),t,a);return this.ws.addEventListener("message",yt(this,Ot)),Promise.resolve(r)}}Ot=new WeakMap,Object.freeze(St),Object.freeze(St.prototype);var wt,_t,Nt=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},Tt=(e,t,s)=>(Nt(e,t,"read from private field"),s?s.call(e):t.get(e)),Lt=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},It=(e,t,s,a)=>(Nt(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s);class Rt{constructor(e,t){Lt(this,wt,void 0),Lt(this,_t,void 0),It(this,_t,e.transition),t.setAttribute("role","presentation");const s=m.Id,a=Object.freeze({toplevel:e,parentElem:t,goToScreen:Object.freeze(this.goToScreen.bind(this))});this.dict=Object.freeze({[s.HOME]:new v(a,s.HOME),[s.LEARNING]:new f(a,s.LEARNING),[s.HOW_TO_HOST]:new b(a,s.HOW_TO_HOST),[s.SETTINGS]:new V(a,s.SETTINGS),[s.SETUP_OFFLINE]:new de(a,s.SETUP_OFFLINE),[s.PLAY_OFFLINE]:new Pe(a,s.PLAY_OFFLINE),[s.GROUP_JOINER]:new et(a,s.GROUP_JOINER),[s.SETUP_ONLINE]:new st(a,s.SETUP_ONLINE),[s.GROUP_LOBBY]:new ut(a,s.GROUP_LOBBY),[s.PLAY_ONLINE]:new St(a,s.PLAY_ONLINE)}),r.R.propNoWrite(this,"dict"),Object.seal(this);const i=m.NavTree[window.location.hash.slice(1)];window.setTimeout((()=>{var e;this.goToScreen(null!=(e=null==i?void 0:i.href)?e:m.Id.HOME,void 0)})),window.addEventListener("popstate",(e=>{this.goToScreen(window.history.state.screenId,{})}))}async goToScreen(e,t){const s=this.currentScreen,a=this.dict[e];if(s===a)throw new Error("never");const r=m.GET_NAV_DIR({curr:null==s?void 0:s.screenId,dest:e});return!(void 0!==s&&!s._leave(r)||(await Tt(this,_t).do({whileBeforeUnblur:a._enter(r,t),beforeUnblur:()=>{var t;e===m.Id.GROUP_JOINER&&this.dict[m.Id.GROUP_LOBBY].lazyLoad(),null==s||s._onAfterLeave(),a._onAfterEnter(),null==(t=a.getRecommendedFocusElem())||t.focus()}}),It(this,wt,a),0))}get currentScreen(){return Tt(this,wt)}}wt=new WeakMap,_t=new WeakMap,Object.freeze(Rt),Object.freeze(Rt.prototype);var Ct,Pt,At,Gt=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},kt=(e,t,s)=>(Gt(e,t,"read from private field"),s?s.call(e):t.get(e)),jt=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)};class zt{constructor(){jt(this,Pt),this.baseElem=document.getElementById(a.Screen.Id.SCREEN_TINT),jt(this,Ct,Promise.resolve()),this.baseElem.tabIndex=-1,this.baseElem.addEventListener("keydown",(e=>{e.preventDefault()}),{capture:!0}),r.R.propNoWrite(this,"baseElem"),Object.seal(this)}do(e){var t,s,a;return t=this,s=Ct,a=kt(this,Ct).then((()=>{return(this,t=Pt,s=At,Gt(this,t,"access private method"),s).call(this,e);var t,s})),Gt(t,s,"write to private field"),s.set(t,a),kt(this,Ct)}_cssTransition(e){return new Promise((t=>{this.baseElem.addEventListener("transitionend",(()=>t()),{once:!0}),e()}))}}Ct=new WeakMap,Pt=new WeakSet,At=async function(e){const t=document.activeElement;this.baseElem.focus();const s=this.baseElem.style;await this._cssTransition((function(){s.pointerEvents="all",s.opacity="1.0"})),void 0!==e.intermediateTransitionTrigger&&await this._cssTransition((()=>{e.intermediateTransitionTrigger()})),await e.whileBeforeUnblur,t instanceof HTMLElement&&t.focus(),void 0!==e.beforeUnblur&&e.beforeUnblur(),await this._cssTransition((function(){s.pointerEvents="none",s.opacity="0.0"})),this.baseElem.blur()},r.R.protoNoEnum(zt,"_cssTransition"),Object.freeze(zt),Object.freeze(zt.prototype);var Ut,Mt,xt=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},Wt=(e,t,s)=>(xt(e,t,"read from private field"),s?s.call(e):t.get(e)),Dt=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},Bt=(e,t,s,a)=>(xt(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s);const Ft=class{constructor(){Dt(this,Ut,void 0),Dt(this,Mt,void 0),this.defaultDocTitle=document.title,this.siteServerType=window.location.hostname.match(/github\.io/)?Ft.SiteServerType.GITHUB:window.location.protocol.startsWith("file")?Ft.SiteServerType.FILESYSTEM:Ft.SiteServerType.DEDICATED,r.R.propNoWrite(this,"defaultDocTitle","siteServerType"),Bt(this,Mt,void 0),this.transition=new zt,r.R.propNoWrite(this,"transition");const e=document.getElementById(a.Screen.Id.ALL_SCREENS);if(!e)throw new Error("never");r.R.Web.prependComment(e,"ALL SCREENS CONTAINER"),Bt(this,Ut,new Rt(this,e)),r.R.propNoWrite(this),Object.seal(this)}get webSocket(){return Wt(this,Mt)}setWebSocket(e){void 0!==this.webSocket&&this.webSocket.close(),Bt(this,Mt,e)}get clientIsGroupHost(){return Wt(this,Ut).dict["group-joiner"].isHost}toast(e){console.info(e)}confirm(e){return window.confirm(e)}get game(){var e;return null!=(e=Wt(this,Ut).dict["play-offline"].probeCurrentGame)?e:Wt(this,Ut).dict["play-online"].probeCurrentGame}get currentScreen(){return Wt(this,Ut).currentScreen}};let Ht=Ft;Ut=new WeakMap,Mt=new WeakMap,(e=>{let t;var s;(s=t=e.SiteServerType||(e.SiteServerType={})).GITHUB="github",s.FILESYSTEM="filesystem",s.DEDICATED="dedicated",e.SiteServerTypeSuggestedGameServer=r.R.deepFreeze({github:void 0,filesystem:{value:"ws://localhost",description:"dev shortcut :)"},dedicated:{value:(()=>{var e;try{const t=new URL(null!=(e=window.location.origin)?e:"");return t.protocol="ws",t.toString()}catch(e){return}})(),description:"this page's server"}})})(Ht||(Ht={})),Object.freeze(Ht),Object.freeze(Ht.prototype);const Jt=new Ht,qt=void 0;function Vt(){return Jt.currentScreen}function Yt(){return Jt.game}console.info("%cðŸ©º welcome! ðŸ","font:700 2.3em /1.5 monospace; margin:0.4em; border:0.3em solid black;padding:0.4em; color:white; background-color:#3f5e77; border-radius:0.7em;")},408:()=>{var e;Object.defineProperties(Array.prototype,{freeze:{value:function(){return Object.freeze(this)},enumerable:!0},seal:{value:function(){return Object.seal(this)},enumerable:!0}}),["Object","String","Number","RegExp","Date","Array","Map","Set","WeakMap","WeakSet","URL","HTMLElement","HTMLDivElement","HTMLSpanElement","HTMLPreElement","HTMLButtonElement","HTMLInputElement","HTMLSelectElement","HTMLOptionElement","HTMLScriptElement","HTMLStyleElement","HTMLLinkElement","HTMLAnchorElement","HTMLDocument","HTMLIFrameElement","HTMLCanvasElement"].forEach((e=>{Object.defineProperty(globalThis,e,{enumerable:!0,writable:!1,configurable:!1}),Object.freeze(globalThis[e]),Object.freeze(globalThis[e].prototype)})),window.addEventListener("onbeforeunload",(()=>{})),e="translate","translate"in Element.prototype||Object.defineProperty(Element.prototype,"translate",{configurable:!1,get:function(){return this.getAttribute(e)},set:function(t){this.setAttribute(e,t)}})},649:(e,t,s)=>{var a={"./murky-dive.css":528,"./smooth-stone.css":121};function r(e){return i(e).then(s)}function i(e){return s.e(122).then((()=>{if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}))}r.keys=()=>Object.keys(a),r.resolve=i,r.id=649,e.exports=r}},e=>{var t=(809,e(e.s=809));capswalk=t}]);
//# sourceMappingURL=index.js.map